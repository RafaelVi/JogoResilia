<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberDev</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <header> 
        <button onclick="enableAutoplay()" type="button">Habilitar musica de fundo</button>
        <button onclick="desableAutoplay()" type="button">Desabilitar musica de fundo</button>
        <button onclick="enableControl()" type="button">Mostrar Player de Aúdio</button>
        <audio id="myVideo" src="backgroundmusic.mp3"  loop="true" controls hidden="true" ></audio>
    </header> 
    <main>  
        <button onclick="jogo()" type="button" id="botaoStart">Começar Jogo</button>
    </main>   

     <audio id="myVideo" src="backgroundmusic.mp3"  loop="true" controls hidden="true" >
      <script>
//----------------------------- Audio Section-----------------------------------------------------------          
          var vid = document.getElementById("myVideo");
        function enableAutoplay() { 
            vid.autoplay = true;
            vid.load();
            
        }
        function desableAutoplay(){
            vid.autoplay = false;
            vid.load();
        }
        function enableControl(){
            vid.hidden = false;
            vid.load();
        }

//---------------------------------------------------------------------------------------------------------
//-------------------------------------Game Section--------------------------------------------------------
        var decisao;
        var conquistas = ["Bem vindo a Sampa City!"];
        var conquista;
        function mensagem(msg){
            alert(msg);
        }
        function fimDeJogo(){
            var continuar = confirm("Deseja continuar jogando? OK para sim cancelar para não");
            return continuar;
        }
        function creditos(nome){
            return alert("Parabéns "+nome+"! Você completou um final de CyberDev, continue explorando diferentes finais para desbloquear novas conquistas, até agora suas conquistas são: \n" + mostrarConquistas());
        }
        function verificarConquista(conquista){
        var verifica =true;
        for(i = 0 ; i < conquistas.length ; i++){
            if(conquistas[i] == conquista){
                verifica = false;
                break;
            }
        }
            if(verifica == true){
                conquistas.push(conquista);
            }
        
    }
        function mostrarConquistas(){
            var concantena = "";
            for(i = 0 ; i < conquistas.length ; i++){
                concantena+= conquistas[i] + "\n";
        }    
            return concantena;
        }
        function jogo(){
            var continuar = true;
            var nome = prompt("Bem vindo ao jogo CyberDev, Antes de eu te introduzir à história, qual o seu nome?");
            while(continuar){
                
                mensagem(`Muito bem ${nome}, Você é um brasileiro que mora em Sampa City e vivenciará uma realidade alternativa que se passa no ano de 2076, nessa realidade o mundo ainda continua divido pela guerra fria, a tensão de uma guerra com potencial para um apocalipse é enorme, a questão é: O quanto você esta disposto a lutar pela paz mundial?`);
                decisao = confirm("Para começo de conversa, Você deseja se alistar para o exército brasileiro ou se tornar programador? OK para programador CANCELAR para soldado");
                if(decisao){
                    mensagem("Você se torna programador e começa a pegar uns freelas.");
                    decisao = confirm("Depois de adquirir experiência o governo brasileiro te contrata para fazer parte do setor de inteligência brasileira, você aceita? OK para aceitar, CANCELAR para recusar");
//------------------------------------------FIM DA 1 PARTE--------------------------------------------                    
                    if(decisao){
                        mensagem("Você entra pra inteligência brasileira e tem acesso a dados interceptados dos dois lados da guerra, mas o governo te proíbe de intervir.");
                        decisao = confirm("Você deseja desobedecer o governo e intervir ou obedecer o governo? OK para obedecer CANCELAR para desobedecer");
                        if(decisao){
                            mensagem("Você não intervém e as nações declaram guerra entre si, causando o fim do mundo.");
                            conquista = "Se você pode salvar o mundo, então salva oras!";
                            mensagem("Conquista desbloqueada:"+conquista);
                            verificarConquista(conquista);
                            creditos(nome);
                            continuar = fimDeJogo();
                        }
                        else{
                            decisao = confirm("Você intervém e parece apaziguar a situação, mas agora esta expulso da inteligência brasileira e terá que ir pra um dos dois países, Qual você quer ir?OK para EUA CANCELAR para União Soviética");
                            if(decisao){
                                mensagem("Nos Estados Unidos você trabalha em conjunto com a CIA para tentar descobrir os planos da União Soviética, mas os dados do servidor começam a desaparecer!");
                                decisao = confirm("Você tem duas opções, tentar fazer um backup ou procurar quem está deletando os dados, o que vc faz?? SEJA RAPIDO(OK para backup e CANCELAR para procurar hacker");
                                if(decisao){
                                    mensagem("Você não consegue recuperar os dados a tempo e eles são deletados, não há tempo de recuperar tudo o que foi perdido...");
                                    mensagem("Com a CIA desamparada, os EUA ficam vulneráveis e a União Soviética consegue atacar os Estados Unidos com bombas nucleares, extinguindo o EUA do globo e encerrando a guerra fria!");
                                    conquista = "VIVA A MÃE RUSSIA";
                                    mensagem("Conquista desbloqueada:"+ conquista);
                                    verificarConquista(conquista);
                                    creditos(nome);
                                    continuar = fimDeJogo();
                                }
                                else{
                                    mensagem("Você descobre que os dados estavam sendo deletados por um espião dentro do prédio, depois de dar uma cabeçada no safado você impede a perda dos dados, parabens!");
                                    mensagem("Com a CIA à todo vapor, os americanos conseguem desativar as defesas soviéticas e atacar à união com bombas nucleares, os Estados Unidos vencem a guerra fria!");
                                    conquista = "Cranio de aço";
                                    mensagem("Conquista desbloqueada:"+ conquista);
                                    verificarConquista(conquista);
                                    creditos(nome);
                                    continuar =  fimDeJogo();
                                }
                            }
                            else{
                                mensagem("Na União Soviética, você não entende bulhufas de russo mas o google tradutor é amigo, você trabalha em conjunto com a KGB para tentar descobrir os planos dos EUA, mas vocês começam a sofrer um ataque hacker!");
                                decisao = confirm("Você tem duas opções: Devolver na mesma moeda e atacar os americanos ou impedir o ataque , o que vc faz?? SEJA RAPIDO(OK para Atacar CANCELAR para Defender");
                                if(decisao){
                                    mensagem("Você consegue destruir o sistema inimigo antes dele destruir o seu!");
                                    mensagem("Com a CIA fragilizada, a união mobiliza tropas e cercam os estados unidos a se render, Vitória Soviética!");
                                    conquista = "A MELHOR DEFESA É O ATAQUE";
                                    mensagem("Conquista desbloqueada:"+ conquista);
                                    verificarConquista(conquista);
                                    creditos(nome);
                                    continuar = fimDeJogo();
                                }
                                else{
                                    mensagem("Você tenta impedir o ataque mas falha, o inimigo destruiu toda as suas informações");
                                    mensagem("Com a KGB fragilizada, os EUA mobilizam um exército e forçam a União Soviética a se render, Vitória Americana!");
                                    mensagem("Conquista desbloqueada:" + conquista);
                                    verificarConquista(conquista);
                                    creditos(nome);
                                    continuar = fimDeJogo();
                                }
                            }
                        }
                    }
                    else{
                        mensagem("Você continua por conta própria, Após meses tentando consegue interceptar mensagens secretas, porém agora tem agentes americanos e soviéticos na sua cola.");
                        decisao = confirm("Você pode despistar os agentes ou tentar convence-los de sua inocência, OK para despistar CANCELAR para convencer")
                        if(decisao){
                            mensagem("Você despista os agentes com sucesso e começa elaborar um plano final");
                            decisao = confirm("Você chega a duas opções, enviar tratados de paz falsos para as duas nações se passando por elas ou tomar posse de todas as armas dos dois lados pra si, qual vc escolhe ? OK para roubar armas e cancelar para Tratado falso");
                            if(decisao){
                                mensagem("Sem armas as nações não tem como lutar, porém todo esse poder bélico subiu a cabeça e você acaba destruindo o mundo por conta própria.");
                                conquista = "(Insira aqui um vilão que não chegou nem aos seus pés)";
                                mensagem("Conquista desbloqueada:"+ conquista);
                                verificarConquista(conquista);
                                creditos(nome);
                                continuar = fimDeJogo();
                            }
                            else{
                                mensagem("O tratado falso convence as nações parar com a guerra e o mundo finalmente pode ter um resquício de paz.");
                                mensagem("Por enquanto...");
                                mensagem("Parabéns! Você conseguiu dissolver uma guerra secular poupando milhões de vidas , agora vai pegar outros freelas.");
                                conquista ="Paz Mundial!";
                                mensagem("Conquista desbloqueada:"+conquista);
                                verificarConquista(conquista);
                                creditos(nome);
                                continuar = fimDeJogo();
                            }

                        }
                        else{
                            mensagem("Você mostra seu lado para os agentes, que não acham convincente o suficiente e acabam te matando");
                            mensagem("Com você morto, as nações declaram guerra entre si, causando o fim do mundo.");
                            conquista = "O inimigo do meu inimigo é meu amigo";
                            mensagem("Conquista desbloqueada:"+conquista);
                            verificarConquista(conquista);
                            creditos(nome);
                            continuar = fimDeJogo();
                        }
                    }
                }
                else{
                    mensagem("Você se alista e luta bravamente junto ao exército da cobra fumante, mas infelizmente é atingido por uma bomba nuclear. F");
                    conquista = "A cobra fumou";
                    mensagem("Conquista desbloqueada:"+ conquista);
                    verificarConquista(conquista);
                    creditos(nome);
                    continuar = fimDeJogo();
                }

                
            }
            
        }

      </script>    
 

        
        
        
    
</body>
</html>